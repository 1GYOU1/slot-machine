<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>규의 슬롯머신</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="wrap">
        <div class="start_zone on">
            <h2 class="tit">프로필 만들기</h2>
            <a class="custom_btn">Start</a>
        </div>
        <div class="game_zone">
            <div class="round_">
                <h3 class="tit">배경색</h3><!--배경색, 머리, 눈, 코, 입, 악세사리-->
                <ul class="slot_box">
                    <li><span></span></li>
                    <li><span></span></li>
                    <li><span></span></li>
                    <li><span></span></li>
                    <li><span></span></li>
                </ul>
            </div>  
            <div class="arrow_area">
                <span></span>
            </div>
            <div class="btn_area">
                <a href="javascript:void(0);" class="custom_btn">Stop</a>
            </div>
        </div>
    </div>
    <script>
    // start_zone
    const startZone = document.querySelector('.start_zone');
    const gameStartBtn = document.querySelector('.start_zone .custom_btn'); // gameStartBtn 버튼
    // game_zone
    const gameZone = document.querySelector('.game_zone');
    const arrowBox = document.querySelector('.arrow_area');// 화살표 박스
    const arrow = document.querySelector('.arrow_area span');// 화살표
    const stopArrowBtn = document.querySelector('.game_zone .custom_btn');// Stop 버튼

    const gameRound = document.querySelector('.game_zone .round_');// round

    let roundCount = 1;

    // 화살표
    let buttonAct = true;
    let Arrdirection = 'right';
    let persent = 0;
    let slotMoveInterval;// 화살표 interval

    // 화살표 결과
    let resultSlot = [];

    // 게임 시작
    gameStartBtn.addEventListener('click', function (){
        startZone.classList.remove('on');
        gameZone.classList.add('on');
        moveArr();
    });

    function moveArr() {
        slotMoveInterval = setInterval(function(){
            let slotMovePosition = parseInt(arrowBox.getBoundingClientRect().width*(persent*0.01)) - (arrow.getBoundingClientRect().width/2);
            // 화살표 방향
            if(Arrdirection == 'right'){
                if(persent == 100){
                    Arrdirection = 'left';
                }else{
                    persent++;
                }
            }else{
                if(slotMovePosition <= 0){
                    Arrdirection = 'right';
                }else{
                    persent--;
                }
            }
            arrow.style.transform = `translateX(${slotMovePosition}px)`;
            console.log(persent)
        }, 1);
    }

    stopArrowBtn.addEventListener('click', function (){
        if(buttonAct){
            stopSlot();
        }else{
            reStartSlot();
        }
    })
    // 화살표 멈추기
    function stopSlot() {
        clearInterval(slotMoveInterval);
        buttonAct = false;
        // resultSlot.push(arrow.offsetLeft);
        console.log(arrow.offsetLeft)
    }
    // 화살표 포지션 초기화, 재시작
    function reStartSlot(){
        persent = 0;
        arrow.style.transform = `translateX(0px)`
        Arrdirection = 'right';
        moveArr();
        buttonAct = true;
    }
        
    </script>
</body>
</html>
